import{j as e,P as B}from"./ui-BC3MnfL_.js";import{c as M,u as H,S as U,C,e as A,f as T,b as z,M as F,d as J,B as L,R as q}from"./index-BW9TQ66M.js";import{B as W}from"./badge-lAzisOat.js";import{u as Y,L as $}from"./index.esm-CdMBttyc.js";import{r as l}from"./router-DGM_l0hZ.js";import{c as G}from"./utils-DCHo40Dh.js";import{s as K,S as R}from"./zod-5F4qsdCV.js";import{z as n}from"./index-C4bLmoCR.js";import"./input-DFM_Mbkh.js";import"./RangeSlider-BuXJQo7m.js";import{E as Q}from"./eye-mf3pHaB9.js";import{S as X}from"./save-UOVziUoS.js";import"./vendor-Csw2ODfV.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ee=M("bell",Z);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],te=M("palette",ae);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ie=M("shield",se),S=({id:o,label:x,description:u,checked:s,onChange:t,disabled:a=!1,error:p,className:m=""})=>e.jsxs("div",{className:`flex items-center justify-between ${m}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:o,className:`block text-sm font-medium ${a?"opacity-50":""}`,children:x}),u&&e.jsx("p",{className:`text-sm text-muted-foreground ${a?"opacity-50":""}`,children:u}),p&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:p})]}),e.jsx("button",{type:"button",role:"switch","aria-checked":s,"aria-labelledby":o,onClick:()=>t(!s),disabled:a,className:`
          relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent 
          transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 
          focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ml-4
          ${s?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}
        `,children:e.jsx("span",{className:`
            pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 
            transition duration-200 ease-in-out
            ${s?"translate-x-5":"translate-x-0"}
          `})})]});var ne="Separator",I="horizontal",oe=["horizontal","vertical"],_=l.forwardRef((o,x)=>{const{decorative:u,orientation:s=I,...t}=o,a=re(s)?s:I,m=u?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return e.jsx(B.div,{"data-orientation":a,...m,...t,ref:x})});_.displayName=ne;function re(o){return oe.includes(o)}var le=_;function E({className:o,orientation:x="horizontal",decorative:u=!0,...s}){return e.jsx(le,{"data-slot":"separator-root",decorative:u,orientation:x,className:G("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",o),...s})}const ce=n.object({notifications:n.object({email:n.boolean(),push:n.boolean(),marketing:n.boolean(),newArticles:n.boolean(),communityUpdates:n.boolean()}),reading:n.object({autoOptimize:n.boolean(),fontSize:n.enum(["small","medium","large","extra-large"]),lineHeight:n.enum(["compact","comfortable","relaxed"]),wordSpacing:n.enum(["tight","normal","loose"])}),privacy:n.object({profileVisibility:n.enum(["public","community","private"]),activityTracking:n.boolean(),dataCollection:n.boolean()}),accessibility:n.object({reduceMotion:n.boolean(),highContrast:n.boolean(),keyboardNavigation:n.boolean()})}),P={notifications:{email:!0,push:!1,marketing:!1,newArticles:!0,communityUpdates:!0},reading:{autoOptimize:!0,fontSize:"medium",lineHeight:"comfortable",wordSpacing:"normal"},privacy:{profileVisibility:"public",activityTracking:!0,dataCollection:!1},accessibility:{reduceMotion:!1,highContrast:!1,keyboardNavigation:!0}};function de({form:o,onSave:x,delay:u=2e3,enabled:s=!0,triggerFields:t}){const a=l.useRef(void 0),p=l.useRef(""),m=l.useRef(!1),f=l.useCallback(async()=>{if(m.current)return;const v=o.getValues(),h=JSON.stringify(v);if(h!==p.current)try{m.current=!0,await x(v),p.current=h}catch(c){console.error("Auto-save failed:",c)}finally{m.current=!1}},[o,x]),b=l.useCallback(()=>{s&&(a.current&&window.clearTimeout(a.current),a.current=window.setTimeout(f,u))},[s,u,f]),d=l.useCallback(async()=>{a.current&&window.clearTimeout(a.current),await f()},[f]),g=l.useCallback(()=>{a.current&&window.clearTimeout(a.current),p.current=JSON.stringify(o.getValues())},[o]);return l.useEffect(()=>{if(!s)return;const v=o.watch((h,{name:c})=>{t&&c&&!t.includes(c)||b()});return()=>{v.unsubscribe(),a.current&&window.clearTimeout(a.current)}},[o,s,t,b]),l.useEffect(()=>()=>{a.current&&window.clearTimeout(a.current)},[]),{manualSave:d,resetAutoSave:g,isSaving:m.current}}const ue=(o={})=>{const{enableAutoSave:x=!1,autoSaveDelay:u=2e3,onSave:s,onReset:t}=o,[a,p]=l.useState(!1),[m,f]=l.useState(null),[b,d]=l.useState("idle"),g=Y({resolver:K(ce),defaultValues:P,mode:"onChange"}),{watch:v,reset:h,getValues:c,formState:{isDirty:N,isValid:y}}=g,{manualSave:V,resetAutoSave:w,isSaving:D}=de({form:g,onSave:async r=>{if(s&&N&&y){d("saving");try{await s(r),f(new Date),d("saved"),h(r,{keepValues:!0})}catch(j){console.error("Auto-save failed:",j),d("error")}}},delay:u,enabled:x}),O=l.useCallback(async()=>{if(y){p(!0),d("saving");try{const r=c();s&&await s(r),f(new Date),d("saved"),h(r,{keepValues:!0}),setTimeout(()=>d("idle"),2e3)}catch(r){throw console.error("Save failed:",r),d("error"),setTimeout(()=>d("idle"),3e3),r}finally{p(!1)}}},[c,y,s,h]),i=l.useCallback(()=>{h(P),d("idle"),f(null),w(),t&&t()},[h,w,t]),k=l.useCallback(r=>{const j={...P,...r};h(j),d("idle")},[h]);return{form:g,isLoading:a,isDirty:N,isValid:y,saveStatus:b,lastSaved:m,isAutoSaving:D,handleSave:O,handleReset:i,loadSettings:k,triggerAutoSave:V,getSectionData:r=>v(r),updateSection:(r,j)=>{g.setValue(r,j,{shouldDirty:!0,shouldValidate:!0})}}},ke=()=>{var N,y,V,w,D,O;const{theme:o,getThemesByCategory:x}=H(),u=x(),s={};Object.values(u).forEach(i=>{Object.assign(s,i)});const t=s[o],{form:a,isLoading:p,isDirty:m,saveStatus:f,lastSaved:b,isAutoSaving:d,handleSave:g,handleReset:v}=ue({enableAutoSave:!0,onSave:async i=>{console.log("Saving settings:",i),await new Promise(k=>setTimeout(k,1e3))},onReset:()=>{console.log("Settings reset to defaults")}}),{watch:h}=a,c=h();return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-secondary/10 to-accent/10 border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-primary/20 rounded-lg",children:e.jsx(U,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-orbitron font-bold gradient-text",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Customize your DOT Platform experience"})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs(C,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{children:"Theme & Appearance"})]})}),e.jsxs(z,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx($,{className:"text-sm font-medium mb-3 block",children:"Current Theme"}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-accent/20 rounded-lg",children:[e.jsx("span",{className:"text-2xl",children:t==null?void 0:t.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t==null?void 0:t.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t==null?void 0:t.description})]}),e.jsx(W,{variant:"outline",className:"ml-auto",children:t==null?void 0:t.category})]})]}),e.jsx(E,{className:""}),e.jsxs("div",{children:[e.jsx($,{className:"text-sm font-medium mb-3 block",children:"Theme Selection"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose from our collection of themes optimized for reading, productivity, and consciousness exploration."})]})]})]})]}),e.jsxs(C,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"w-5 h-5"}),e.jsx("span",{children:"Reading Preferences"})]})}),e.jsxs(z,{className:"space-y-6",children:[e.jsx(S,{id:"auto-optimize",label:"Auto-optimize for reading",description:"Automatically apply reading optimizations like improved line spacing and typography",checked:((N=c.reading)==null?void 0:N.autoOptimize)||!1,onChange:i=>a.setValue("reading.autoOptimize",i,{shouldDirty:!0})}),e.jsx(E,{className:""}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(R,{name:"reading.fontSize",control:a.control,label:"Font Size",options:[{value:"small",label:"Small"},{value:"medium",label:"Medium"},{value:"large",label:"Large"},{value:"extra-large",label:"Extra Large"}]}),e.jsx(R,{name:"reading.lineHeight",control:a.control,label:"Line Height",options:[{value:"compact",label:"Compact"},{value:"comfortable",label:"Comfortable"},{value:"relaxed",label:"Relaxed"}]}),e.jsx(R,{name:"reading.wordSpacing",control:a.control,label:"Word Spacing",options:[{value:"tight",label:"Tight"},{value:"normal",label:"Normal"},{value:"loose",label:"Loose"}]})]})]})]}),e.jsxs(C,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("span",{children:"Notifications"})]})}),e.jsx(z,{className:"space-y-6",children:Object.entries({email:"Email notifications",push:"Push notifications",marketing:"Marketing communications",newArticles:"New articles and content",communityUpdates:"Community updates"}).map(([i,k])=>{var r;return e.jsx(S,{id:i,label:k,checked:((r=c.notifications)==null?void 0:r[i])||!1,onChange:j=>a.setValue(`notifications.${i}`,j,{shouldDirty:!0})},i)})})]}),e.jsxs(C,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center space-x-2",children:[e.jsx(ie,{className:"w-5 h-5"}),e.jsx("span",{children:"Privacy & Security"})]})}),e.jsxs(z,{className:"space-y-6",children:[e.jsx(R,{name:"privacy.profileVisibility",control:a.control,label:"Profile Visibility",options:[{value:"public",label:"Public"},{value:"community",label:"Community Members Only"},{value:"private",label:"Private"}]}),e.jsx(E,{className:""}),e.jsx(S,{id:"activity-tracking",label:"Activity tracking",description:"Allow tracking of reading progress and learning analytics",checked:((y=c.privacy)==null?void 0:y.activityTracking)||!1,onChange:i=>a.setValue("privacy.activityTracking",i,{shouldDirty:!0})}),e.jsx(S,{id:"data-collection",label:"Enhanced data collection",description:"Help improve the platform with anonymous usage data",checked:((V=c.privacy)==null?void 0:V.dataCollection)||!1,onChange:i=>a.setValue("privacy.dataCollection",i,{shouldDirty:!0})})]})]}),e.jsxs(C,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsx("span",{children:"Accessibility"})]})}),e.jsxs(z,{className:"space-y-6",children:[e.jsx(S,{id:"reduce-motion",label:"Reduce motion",description:"Minimize animations and transitions",checked:((w=c.accessibility)==null?void 0:w.reduceMotion)||!1,onChange:i=>a.setValue("accessibility.reduceMotion",i,{shouldDirty:!0})}),e.jsx(S,{id:"high-contrast",label:"High contrast mode",description:"Increase contrast for better visibility",checked:((D=c.accessibility)==null?void 0:D.highContrast)||!1,onChange:i=>a.setValue("accessibility.highContrast",i,{shouldDirty:!0})}),e.jsx(S,{id:"keyboard-nav",label:"Enhanced keyboard navigation",description:"Improved keyboard accessibility features",checked:((O=c.accessibility)==null?void 0:O.keyboardNavigation)||!1,onChange:i=>a.setValue("accessibility.keyboardNavigation",i,{shouldDirty:!0})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(L,{onClick:g,className:"flex items-center space-x-2 flex-1",disabled:!m||p,"data-save-button":!0,children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:f==="saving"?"Saving...":f==="saved"?"Saved!":f==="error"?"Error!":"Save Settings"})]}),e.jsxs(L,{variant:"outline",onClick:v,className:"flex items-center space-x-2",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"Reset to Defaults"})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[m&&e.jsx("p",{children:"You have unsaved changes"}),d&&e.jsx("p",{children:"Auto-saving..."}),b&&e.jsxs("p",{children:["Last saved: ",b.toLocaleTimeString()]})]})]})})]})};export{ke as default};
